<div class="container">
  <h2 class="page-title">MenÃº del restaurante</h2>

  @if(menu && menu.items.length > 0) {
    <div class="menu-grid">
      @for(item of menu.items; track item.id){
        
        <div class="menu-card" [class.highlight-fav]="item.isFavorite">
          
          <div class="card-content">
            
            <div class="card-header">
              <h3 class="product-name">{{ item.name }}</h3>
              
              <button 
                class="btn-favorite" 
                [class.active]="item.isFavorite" 
                (click)="toggleFavorite($event, item.id)" 
                title="Agregar a favoritos">
                {{ item.isFavorite ? 'â¤ï¸' : 'ğŸ¤' }}
              </button>
            </div>

            <div class="badges-container">
              @if(item.isHappyHour) {
                <span class="badge badge-happy">ğŸ» Happy Hour</span>
              }
              
              @if(item.discount && item.discount > 0) {
                <span class="badge badge-discount">ğŸ·ï¸ {{ item.discount }}% OFF</span>
              }
            </div>
            
            <div class="price-row">
              @if(item.discount && item.discount > 0) {
                <span class="old-price">$ {{ item.price | number:'1.0-0' }}</span>
                <span class="new-price">$ {{ item.price - (item.price * item.discount / 100) | number:'1.0-0' }}</span>
              } @else {
                <p class="regular-price">$ {{ item.price | number:'1.0-0' }}</p>
              }
            </div>

            <span class="link-detail" (click)="viewDetail(item.id)">Ver detalle â†’</span>
          </div>

          @if(isOwner){
            <div class="owner-actions">
              <button class="btn-action btn-edit" (click)="editProduct(item.id)">
                âœï¸ Editar
              </button>
              <button class="btn-action btn-delete" (click)="deleteProduct(item.id)">
                ğŸ—‘ï¸ Eliminar
              </button>
            </div>
          }

        </div>
      }
    </div>
  } @else {
    <div class="empty-state">
      <p>No hay productos en el menÃº todavÃ­a.</p>
    </div>
  }

  @if(isOwner){
    <hr class="divider">
    <div class="admin-panel">
      <h3>ğŸ› ï¸ Panel de AdministraciÃ³n</h3>
      
      <div class="admin-grid">
        <button class="btn-admin btn-primary" (click)="goToNewProduct()">
          + Nuevo Producto
        </button>

        <button class="btn-admin btn-secondary" (click)="goToCategories()">
          ğŸ“‚ CategorÃ­as
        </button>

        <button class="btn-admin btn-danger-outline" (click)="goToProfile()">
          âš™ï¸ Mi Cuenta
        </button>
      </div>
    </div>
  } @else {
    <button class="btn-cart-fab" (click)="goToCart()">
      ğŸ›’
    </button>
  }

  <ng-template #noMenu>
    <p>No hay menÃº disponible.</p>
  </ng-template>
</div>
